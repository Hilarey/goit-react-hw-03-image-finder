(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{10:function(e,a,t){e.exports={overlay:"Modal_overlay__-dBzm",modal:"Modal_modal__2HlXq"}},23:function(e,a,t){e.exports={imageGalleryItemImage:"ImageGalleryItem_imageGalleryItemImage__xIAkj"}},24:function(e,a,t){e.exports={button:"LoadMore_button__2TXla"}},26:function(e,a,t){e.exports=t(71)},53:function(e,a,t){},71:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),o=t(21),c=t.n(o),l=t(11),s=t(3),i=t(4),u=t(6),m=t(5),h=t(7),g=t(22),d=t.n(g),f=(t(52),t(53),function(e){var a=e.children;return r.a.createElement("div",{className:"Layout"},a)}),p=t(8),y=t.n(p),v=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={query:""},t.handleChange=function(e){t.setState({query:e.target.value})},t.handleSubmit=function(e){e.preventDefault(),t.props.onSubmit(t.state.query),t.setState({query:""})},t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){var e=this.state.query;return r.a.createElement("header",{className:y.a.searchBar},r.a.createElement("form",{className:y.a.searchForm,onSubmit:this.handleSubmit},r.a.createElement("button",{type:"submit",className:y.a.searchFormButton},r.a.createElement("span",{className:y.a.searchFormButtonLabel},"Search")),r.a.createElement("input",{className:y.a.searchFormInput,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:e,onChange:this.handleChange})))}}]),a}(n.Component),b=t(23),_=t.n(b),I=function(e){var a=e.webformatURL,t=e.tags,n=e.onLargeImage,o=e.id;return r.a.createElement("img",{src:a,alt:t,className:_.a.imageGalleryItemImage,onClick:function(){n(o)}})},w=t(9),E=t.n(w),S=function(e){var a=e.cards,t=e.onLargeImage;return r.a.createElement("ul",{className:E.a.imageGallery},a.map((function(e){var a=e.id,n=e.webformatURL,o=e.tags;return r.a.createElement("li",{key:a,className:E.a.imageGalleryItem},r.a.createElement(I,{id:a,webformatURL:n,tags:o,onLargeImage:t}))})))},k=t(10),C=t.n(k),L=function(e){function a(){var e,t;Object(s.a)(this,a);for(var r=arguments.length,o=new Array(r),c=0;c<r;c++)o[c]=arguments[c];return(t=Object(u.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(o)))).overleyRef=Object(n.createRef)(),t.handleKeyDown=function(e){"Escape"===e.code&&t.props.onClose()},t.handleOverleyClick=function(e){var a=t.overleyRef.current;a&&e.target!==a||t.props.onClose()},t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var e=this.props.src;return r.a.createElement("div",{className:C.a.overlay,ref:this.overleyRef,onClick:this.handleOverleyClick},r.a.createElement("div",{className:C.a.modal},r.a.createElement("img",{src:e,alt:"LargePhoto"})))}}]),a}(n.Component),O=t(24),j=t.n(O),F=function(e){var a=e.onClick;return r.a.createElement("button",{type:"button",className:j.a.button,onClick:a},"LoadMore")},B=t(25),G=t.n(B),M=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return G.a.get("https://pixabay.com/api/?q=".concat(e,"&page=").concat(a,"&key=15396872-c9327f1987334023142d3e162&image_type=photo&orientation=horizontal&per_page=12")).then((function(e){return e.data.hits}))},N=function(){var e={top:document.documentElement.scrollHeight,behavior:"smooth"};window.scrollTo(e)},x=function(e){function a(){var e,t;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=Object(u.a)(this,(e=Object(m.a)(a)).call.apply(e,[this].concat(r)))).state={cards:[],loading:!1,error:null,searchQuery:"",page:1,showModal:!1,largeImage:null},t.fetchCards=function(){var e=t.state,a=e.searchQuery,n=e.page;t.setState({loading:!0}),M(a,n).then((function(e){return t.setState((function(a){return{cards:[].concat(Object(l.a)(a.cards),Object(l.a)(e)),page:a.page+1}}))})).catch((function(e){return t.setState({error:e})})).finally((function(){return t.setState({loading:!1},N)}))},t.handleSearchFormSubmit=function(e){t.setState({searchQuery:e,page:1,cards:[]})},t.toggleModal=function(){t.setState((function(e){return{showModal:!e.showModal}}))},t.onLargeImage=function(e){var a=t.state.cards.find((function(a){return a.id===e}));a&&t.setState({largeImage:a.largeImageURL},t.toggleModal)},t}return Object(h.a)(a,e),Object(i.a)(a,[{key:"componentDidUpdate",value:function(e,a){a.searchQuery!==this.state.searchQuery&&this.fetchCards()}},{key:"render",value:function(){var e=this.state,a=e.cards,t=e.loading,n=e.error,o=e.showModal,c=e.largeImage;return r.a.createElement(f,null,r.a.createElement(v,{onSubmit:this.handleSearchFormSubmit}),n&&r.a.createElement("p",null,"Whoops, something went wrong: ",n.message),a.length>0&&r.a.createElement(S,{cards:a,onLargeImage:this.onLargeImage}),t&&r.a.createElement(d.a,{type:"Puff",color:"#00BFFF",height:50,width:50}),a.length>0&&!t&&r.a.createElement(F,{onClick:this.fetchCards}),o&&r.a.createElement(L,{src:c,onClose:this.toggleModal}))}}]),a}(n.Component);c.a.render(r.a.createElement(x,null),document.getElementById("root"))},8:function(e,a,t){e.exports={searchBar:"SearchBar_searchBar__26ml_",searchForm:"SearchBar_searchForm__oa9Y3",searchFormButton:"SearchBar_searchFormButton__1gG7o",searchFormButtonLabel:"SearchBar_searchFormButtonLabel__2gAbN",searchFormInput:"SearchBar_searchFormInput__3uvky"}},9:function(e,a,t){e.exports={imageGallery:"ImageGallery_imageGallery__29MyW",imageGalleryItem:"ImageGallery_imageGalleryItem__11LhI"}}},[[26,1,2]]]);
//# sourceMappingURL=main.cbd236ba.chunk.js.map